<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="3702px" preserveAspectRatio="none" style="width:2222px;height:3702px;" version="1.1" viewBox="0 0 2222 3702" width="2222px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="38.1016" rx="5" ry="5" style="stroke: #000000; stroke-width: 1.0;" width="286" x="966.5" y="12"/><text fill="#000000" font-family="Consolas" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="270" x="974.5" y="38.9258">WebRTC音频数据调用流程</text><ellipse cx="1110" cy="63.1016" fill="#000000" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#000000" height="6" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 1.0;" width="2200" x="11" y="121.8359"/><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="490" x="43" y="166.5703"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="470" x="53" y="193.0146">VoiceProcessingAudioUnit::OnDeliverRecordedData</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="530" x="23" y="235.1084"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="510" x="33" y="261.5527">VoiceProcessingAudioUnit::NotifyDeliverRecordedData</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="390" x="93" y="329.9189"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="370" x="103" y="356.3633">AudioDeviceIOS::OnDeliverRecordedData</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="380" x="98" y="419.8467"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="360" x="108" y="446.291">FineAudioBuffer::DeliverRecordedData</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="230" x="776" y="166.5703"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="210" x="786" y="193.0146">AudioRecordThread run</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="400" x="691" y="235.1084"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="380" x="701" y="261.5527">WebRtcAudioRecord nativeDataIsRecorded</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="620" x="581" y="329.9189"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="600" x="591" y="356.3633">Java_org_webrtc_audio_WebRtcAudioRecord_nativeDataIsRecorded</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="320" x="731" y="419.8467"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="300" x="741" y="446.291">AudioRecordJni::DataIsRecorded</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="300" x="1264" y="166.5703"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="280" x="1274" y="193.0146">AudioDeviceMac::deviceIOProc</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="360" x="1234" y="235.1084"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="340" x="1244" y="261.5527">AudioDeviceMac::implInDeviceIOProc</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="370" x="1229" y="329.9189"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="350" x="1239" y="356.3633">AudioDeviceMac::implInConverterProc</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="370" x="1229" y="419.8467"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="350" x="1239" y="446.291">AudioDeviceMac::DeliverRecordedData</text><rect fill="#FFFFFF" height="62.1523" style="stroke: #66696B; stroke-width: 2.0;" width="260" x="1644" y="281.3428"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="240" x="1654" y="307.7871">AudioDeviceWindowsCore::</text><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="220" x="1654" y="328.8633">DoCaptureThreadPollDMO</text><rect fill="#FFFFFF" height="62.1523" style="stroke: #66696B; stroke-width: 2.0;" width="250" x="1937" y="281.3428"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="230" x="1947" y="307.7871">AudioDeviceLinuxPulse::</text><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="160" x="1947" y="328.8633">RecThreadProcess</text><rect fill="#000000" height="6" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 1.0;" width="2200" x="11" y="499.6572"/><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="400" x="910" y="525.6572"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="380" x="920" y="552.1016">AudioDeviceBuffer::DeliverRecordedData</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="450" x="885" y="615.4678"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="430" x="895" y="641.9121">AudioTransportImp::RecodrdedDataIsAvailable</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="320" x="950" y="705.2783"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="300" x="960" y="731.7227">AudioSendStream::SendAudioData</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="360" x="930" y="795.0889"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="340" x="940" y="821.5332">ChannelSend::ProcessAndEncodeAudio</text><ellipse cx="1110" cy="894.8994" fill="#FFFFFF" rx="10" ry="10" style="stroke: #66696B; stroke-width: 2.0;"/><path d="M1114.1582,895.7773 L1110.7041,895.7773 L1110.7041,899.3633 L1109.1924,899.3633 L1109.1924,895.7773 L1105.7383,895.7773 L1105.7383,894.4414 L1109.1924,894.4414 L1109.1924,890.8818 L1110.7041,890.8818 L1110.7041,894.4414 L1114.1582,894.4414 Z "/><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="360" x="930" y="953.6338"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="340" x="940" y="980.0781">AudioCodingModuleImpl::Add10MsData</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="310" x="955" y="1014.71"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="290" x="965" y="1041.1543">AudioCodingModuleImpl::Encode</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="210" x="1005" y="1104.5205"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="190" x="1015" y="1130.9648">AudioEncder::Encode</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="340" x="940" y="1194.3311"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="320" x="950" y="1220.7754">AudioEncoderOpusImpl::EncodeImpl</text><rect fill="#000000" height="6" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 1.0;" width="218" x="1001" y="1255.4072"/><rect fill="#BAC0C1" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="190" x="1015" y="1281.4072"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="170" x="1025" y="1307.8516">WebRtcOpus_Encode</text><rect fill="#000000" height="6" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 1.0;" width="218" x="1001" y="1342.4834"/><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="310" x="955" y="1368.4834"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="290" x="965" y="1394.9277">AudioCodingModuleImpl::Encode</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="230" x="995" y="1458.2939"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="210" x="1005" y="1484.7383">ChannelSend::SendData</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="270" x="975" y="1519.3701"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="250" x="985" y="1545.8145">ChannelSend::SendRtpAudio</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="270" x="975" y="1609.1807"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="250" x="985" y="1635.625">RTPSenderAudio::SendAudio</text><rect fill="#000000" height="6" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 1.0;" width="238" x="991" y="1670.2568"/><rect fill="#AAAAAA" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="210" x="1005" y="1714.9912"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="190" x="1015" y="1741.4355">RTP &amp; Network layer</text><rect fill="#000000" height="6" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 1.0;" width="238" x="991" y="1766.0674"/><ellipse cx="1110" cy="1803.0674" fill="#FFFFFF" rx="11" ry="11" style="stroke: #FF0000; stroke-width: 1.0;"/><ellipse cx="1110" cy="1803.0674" fill="#FF0000" rx="6" ry="6" style="stroke: #FF7F7F; stroke-width: 1.0;"/><ellipse cx="1110" cy="1834.0674" fill="#000000" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#000000" height="6" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 1.0;" width="2138" x="41" y="1892.8018"/><ellipse cx="295" cy="1947.5361" fill="#FFFFFF" rx="10" ry="10" style="stroke: #66696B; stroke-width: 2.0;"/><path d="M299.1582,1948.4141 L295.7041,1948.4141 L295.7041,1952 L294.1924,1952 L294.1924,1948.4141 L290.7383,1948.4141 L290.7383,1947.0781 L294.1924,1947.0781 L294.1924,1943.5186 L295.7041,1943.5186 L295.7041,1947.0781 L299.1582,1947.0781 Z "/><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="440" x="75" y="1992.5361"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="420" x="85" y="2018.9805">VoiceProcessingAudioUnit::OnGetPlayoutData</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="480" x="55" y="2062.3779"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="460" x="65" y="2088.8223">VoiceProcessingAudioUnit::NotifyGetPlayoutData</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="340" x="125" y="2157.1885"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="320" x="135" y="2183.6328">AudioDeviceIOS::OnGetPlayoutData</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="330" x="130" y="2247.1162"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="310" x="140" y="2273.5605">FineAudioBuffer::GetPlayoutData</text><ellipse cx="868" cy="1947.5361" fill="#FFFFFF" rx="10" ry="10" style="stroke: #66696B; stroke-width: 2.0;"/><path d="M872.1582,1948.4141 L868.7041,1948.4141 L868.7041,1952 L867.1924,1952 L867.1924,1948.4141 L863.7383,1948.4141 L863.7383,1947.0781 L867.1924,1947.0781 L867.1924,1943.5186 L868.7041,1943.5186 L868.7041,1947.0781 L872.1582,1947.0781 Z "/><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="220" x="758" y="1992.5361"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="200" x="768" y="2018.9805">AudioTrackThread run</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="390" x="673" y="2062.3779"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="370" x="683" y="2088.8223">WebRtcAudioTrack nativeGetPlayoutData</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="610" x="563" y="2157.1885"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="590" x="573" y="2183.6328">Java_org_webrtc_audio_WebRtcAudioTrack_nativeGetPlayoutData</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="310" x="713" y="2247.1162"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="290" x="723" y="2273.5605">AudioTrackJni::GetPlayoutData</text><ellipse cx="1391" cy="1947.5361" fill="#FFFFFF" rx="10" ry="10" style="stroke: #66696B; stroke-width: 2.0;"/><path d="M1395.1582,1948.4141 L1391.7041,1948.4141 L1391.7041,1952 L1390.1924,1952 L1390.1924,1948.4141 L1386.7383,1948.4141 L1386.7383,1947.0781 L1390.1924,1947.0781 L1390.1924,1943.5186 L1391.7041,1943.5186 L1391.7041,1947.0781 L1395.1582,1947.0781 Z "/><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="300" x="1241" y="1992.5361"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="280" x="1251" y="2018.9805">AudioDeviceMac::deviceIOProc</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="340" x="1221" y="2062.3779"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="320" x="1231" y="2088.8223">AudioDeviceMac::implDeviceIOProc</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="380" x="1201" y="2157.1885"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="360" x="1211" y="2183.6328">AudioDeviceMac::implOutConverterProc</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="360" x="1211" y="2247.1162"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="340" x="1221" y="2273.5605">AudioDeviceMac::RenderWorkerThread</text><ellipse cx="1742" cy="2063.6123" fill="#FFFFFF" rx="10" ry="10" style="stroke: #66696B; stroke-width: 2.0;"/><path d="M1746.1582,2064.4902 L1742.7041,2064.4902 L1742.7041,2068.0762 L1741.1924,2068.0762 L1741.1924,2064.4902 L1737.7383,2064.4902 L1737.7383,2063.1543 L1741.1924,2063.1543 L1741.1924,2059.5947 L1742.7041,2059.5947 L1742.7041,2063.1543 L1746.1582,2063.1543 Z "/><rect fill="#FFFFFF" height="62.1523" style="stroke: #66696B; stroke-width: 2.0;" width="260" x="1612" y="2108.6123"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="240" x="1622" y="2135.0566">AudioDeviceWindowsCore::</text><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="140" x="1622" y="2156.1328">DoRenderThread</text><ellipse cx="2030" cy="2063.6123" fill="#FFFFFF" rx="10" ry="10" style="stroke: #66696B; stroke-width: 2.0;"/><path d="M2034.1582,2064.4902 L2030.7041,2064.4902 L2030.7041,2068.0762 L2029.1924,2068.0762 L2029.1924,2064.4902 L2025.7383,2064.4902 L2025.7383,2063.1543 L2029.1924,2063.1543 L2029.1924,2059.5947 L2030.7041,2059.5947 L2030.7041,2063.1543 L2034.1582,2063.1543 Z "/><rect fill="#FFFFFF" height="62.1523" style="stroke: #66696B; stroke-width: 2.0;" width="250" x="1905" y="2108.6123"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="230" x="1915" y="2135.0566">AudioDeviceLinuxPulse::</text><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="170" x="1915" y="2156.1328">PlayThreadProcess</text><rect fill="#000000" height="6" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 1.0;" width="2138" x="41" y="2326.9268"/><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="390" x="915" y="2352.9268"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="370" x="925" y="2379.3711">AudioDeviceBuffer::RequestPlayoutData</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="380" x="920" y="2442.7373"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="360" x="930" y="2469.1816">AudioTransportImpl::NeedMorePlayData</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="210" x="1005" y="2532.5479"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="190" x="1015" y="2558.9922">AudioMixerImpl::Mix</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="360" x="930" y="2593.624"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="340" x="940" y="2620.0684">AudioMixerImpl::GetAudioFromSource</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="430" x="895" y="2683.4346"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="410" x="905" y="2709.8789">AudioReceiveStream::GetAudioFrameWithInfo</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="390" x="915" y="2773.2451"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="370" x="925" y="2799.6895">ChannelReceive::GetAudioFrameWithInfo</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="230" x="995" y="2863.0557"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="210" x="1005" y="2889.5">AcmReceiver::GetAudio</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="230" x="995" y="2952.8662"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="210" x="1005" y="2979.3105">NetEqImpl::DecodeLoop</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="190" x="1015" y="3042.6768"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="170" x="1025" y="3069.1211">OpusFrame::Decode</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="220" x="1000" y="3132.4873"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="200" x="1010" y="3158.9316">AudioDecoder::Decode</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="380" x="920" y="3222.2979"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="360" x="930" y="3248.7422">AudioDecoderOpusImpl::DecodeInternal</text><rect fill="#000000" height="6" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 1.0;" width="298" x="961" y="3283.374"/><rect fill="#BAC0C1" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="190" x="1015" y="3309.374"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="170" x="1025" y="3335.8184">WebRtcOpus_Decode</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="230" x="995" y="3370.4502"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="210" x="1005" y="3396.8945">NetEqImpl::DecodeLoop</text><rect fill="#FFFFFF" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="270" x="975" y="3460.2607"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="250" x="985" y="3486.7051">AcmReceiver::InsertPacket</text><rect fill="#000000" height="6" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 1.0;" width="298" x="961" y="3521.3369"/><rect fill="#000000" height="6" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 1.0;" width="238" x="991" y="3547.3369"/><rect fill="#AAAAAA" height="41.0762" style="stroke: #66696B; stroke-width: 2.0;" width="210" x="1005" y="3592.0713"/><text fill="#000000" font-family="Consolas" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="190" x="1015" y="3618.5156">RTP &amp; Network layer</text><rect fill="#000000" height="6" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 1.0;" width="238" x="991" y="3643.1475"/><ellipse cx="1110" cy="3680.1475" fill="#FFFFFF" rx="11" ry="11" style="stroke: #FF0000; stroke-width: 1.0;"/><ellipse cx="1110" cy="3680.1475" fill="#FF0000" rx="6" ry="6" style="stroke: #FF7F7F; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5;" x1="288" x2="288" y1="207.6465" y2="235.1084"/><polygon fill="#66696B" points="284,225.1084,288,235.1084,292,225.1084,288,229.1084" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5;" x1="288" x2="288" y1="276.1846" y2="329.9189"/><polygon fill="#66696B" points="284,319.9189,288,329.9189,292,319.9189,288,323.9189" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="72" x="292" y="308.3018">oberver_</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="288" x2="288" y1="370.9951" y2="419.8467"/><polygon fill="#66696B" points="284,409.8467,288,419.8467,292,409.8467,288,413.8467" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="162" x="292" y="398.2295">fine_audio_buffer_</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="891" x2="891" y1="207.6465" y2="235.1084"/><polygon fill="#66696B" points="887,225.1084,891,235.1084,895,225.1084,891,229.1084" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5;" x1="891" x2="891" y1="276.1846" y2="329.9189"/><polygon fill="#66696B" points="887,319.9189,891,329.9189,895,319.9189,891,323.9189" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="27" x="895" y="308.3018">JNI</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="891" x2="891" y1="370.9951" y2="419.8467"/><polygon fill="#66696B" points="887,409.8467,891,419.8467,895,409.8467,891,413.8467" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="180" x="895" y="398.2295">nativeAudioRecordJni</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1414" x2="1414" y1="207.6465" y2="235.1084"/><polygon fill="#66696B" points="1410,225.1084,1414,235.1084,1418,225.1084,1414,229.1084" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5; stroke-dasharray: 7.0,7.0;" x1="1414" x2="1414" y1="276.1846" y2="329.9189"/><polygon fill="#66696B" points="1410,319.9189,1414,329.9189,1418,319.9189,1414,323.9189" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="144" x="1418" y="308.3018">_paCaptureBuffer</text><line style="stroke: #66696B; stroke-width: 1.5; stroke-dasharray: 7.0,7.0;" x1="1414" x2="1414" y1="370.9951" y2="419.8467"/><polygon fill="#66696B" points="1410,409.8467,1414,419.8467,1418,409.8467,1414,413.8467" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="198" x="1418" y="398.2295">capture_worker_thread_</text><line style="stroke: #FF0000; stroke-width: 1.5;" x1="288" x2="288" y1="127.8359" y2="166.5703"/><polygon fill="#FF0000" points="284,156.5703,288,166.5703,292,156.5703,288,160.5703" style="stroke: #FF0000; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="27" x="292" y="152.4531">iOS</text><line style="stroke: #FF0000; stroke-width: 1.5;" x1="891" x2="891" y1="127.8359" y2="166.5703"/><polygon fill="#FF0000" points="887,156.5703,891,166.5703,895,156.5703,891,160.5703" style="stroke: #FF0000; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="63" x="895" y="152.4531">Android</text><line style="stroke: #FF0000; stroke-width: 1.5;" x1="1414" x2="1414" y1="127.8359" y2="166.5703"/><polygon fill="#FF0000" points="1410,156.5703,1414,166.5703,1418,156.5703,1414,160.5703" style="stroke: #FF0000; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="45" x="1418" y="152.4531">macOS</text><line style="stroke: #FF0000; stroke-width: 1.5;" x1="1774" x2="1774" y1="127.8359" y2="281.3428"/><polygon fill="#FF0000" points="1770,271.3428,1774,281.3428,1778,271.3428,1774,275.3428" style="stroke: #FF0000; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="63" x="1778" y="213.6084">Windows</text><line style="stroke: #FF0000; stroke-width: 1.5;" x1="2062" x2="2062" y1="127.8359" y2="281.3428"/><polygon fill="#FF0000" points="2058,271.3428,2062,281.3428,2066,271.3428,2062,275.3428" style="stroke: #FF0000; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="45" x="2066" y="213.6084">Linux</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="288" x2="288" y1="460.9229" y2="499.6572"/><polygon fill="#66696B" points="284,489.6572,288,499.6572,292,489.6572,288,493.6572" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="180" x="292" y="485.54">audio_device_buffer_</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="891" x2="891" y1="460.9229" y2="499.6572"/><polygon fill="#66696B" points="887,489.6572,891,499.6572,895,489.6572,891,493.6572" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="180" x="895" y="485.54">audio_device_buffer_</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1414" x2="1414" y1="460.9229" y2="499.6572"/><polygon fill="#66696B" points="1410,489.6572,1414,499.6572,1418,489.6572,1414,493.6572" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="135" x="1418" y="485.54">_ptrAudioBuffer</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1774" x2="1774" y1="343.4951" y2="499.6572"/><polygon fill="#66696B" points="1770,489.6572,1774,499.6572,1778,489.6572,1774,493.6572" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="135" x="1778" y="424.3848">_ptrAudioBuffer</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="2062" x2="2062" y1="343.4951" y2="499.6572"/><polygon fill="#66696B" points="2058,489.6572,2062,499.6572,2066,489.6572,2062,493.6572" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="135" x="2066" y="424.3848">_ptrAudioBuffer</text><line style="stroke: #FF0000; stroke-width: 1.5;" x1="1110" x2="1110" y1="73.1016" y2="121.8359"/><polygon fill="#FF0000" points="1106,111.8359,1110,121.8359,1114,111.8359,1110,115.8359" style="stroke: #FF0000; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="32" x="1114" y="100.3359">发送</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="505.6572" y2="525.6572"/><polygon fill="#66696B" points="1106,515.6572,1110,525.6572,1114,515.6572,1110,519.6572" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="566.7334" y2="615.4678"/><polygon fill="#66696B" points="1106,605.4678,1110,615.4678,1114,605.4678,1110,609.4678" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="171" x="1114" y="593.9678">audio_transport_cb_</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="656.5439" y2="705.2783"/><polygon fill="#66696B" points="1106,695.2783,1110,705.2783,1114,695.2783,1110,699.2783" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="144" x="1114" y="683.7783">sending_streams_</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="746.3545" y2="795.0889"/><polygon fill="#66696B" points="1106,785.0889,1110,795.0889,1114,785.0889,1110,789.0889" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="117" x="1114" y="773.5889">channel_send_</text><line style="stroke: #66696B; stroke-width: 1.5; stroke-dasharray: 1.0,3.0;" x1="1110" x2="1110" y1="836.165" y2="884.8994"/><polygon fill="#66696B" points="1106,874.8994,1110,884.8994,1114,874.8994,1110,878.8994" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="126" x="1114" y="863.3994">encoder_queue_</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="904.8994" y2="953.6338"/><polygon fill="#66696B" points="1106,943.6338,1110,953.6338,1114,943.6338,1110,947.6338" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="117" x="1114" y="932.1338">audio_coding_</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="994.71" y2="1014.71"/><polygon fill="#66696B" points="1106,1004.71,1110,1014.71,1114,1004.71,1110,1008.71" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="1055.7861" y2="1104.5205"/><polygon fill="#66696B" points="1106,1094.5205,1110,1104.5205,1114,1094.5205,1110,1098.5205" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="126" x="1114" y="1083.0205">encoder_stack_</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="1145.5967" y2="1194.3311"/><polygon fill="#66696B" points="1106,1184.3311,1110,1194.3311,1114,1184.3311,1110,1188.3311" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="36" x="1114" y="1172.8311">this</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="1261.4072" y2="1281.4072"/><polygon fill="#66696B" points="1106,1271.4072,1110,1281.4072,1114,1271.4072,1110,1275.4072" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="1322.4834" y2="1342.4834"/><polygon fill="#66696B" points="1106,1332.4834,1110,1342.4834,1114,1332.4834,1110,1336.4834" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="1235.4072" y2="1255.4072"/><polygon fill="#66696B" points="1106,1245.4072,1110,1255.4072,1114,1245.4072,1110,1249.4072" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="1348.4834" y2="1368.4834"/><polygon fill="#66696B" points="1106,1358.4834,1110,1368.4834,1114,1358.4834,1110,1362.4834" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="1409.5596" y2="1458.2939"/><polygon fill="#66696B" points="1106,1448.2939,1110,1458.2939,1114,1448.2939,1110,1452.2939" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="207" x="1114" y="1436.7939">packetizarion_callback_</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="1499.3701" y2="1519.3701"/><polygon fill="#66696B" points="1106,1509.3701,1110,1519.3701,1114,1509.3701,1110,1513.3701" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="1560.4463" y2="1609.1807"/><polygon fill="#66696B" points="1106,1599.1807,1110,1609.1807,1114,1599.1807,1110,1603.1807" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="153" x="1114" y="1587.6807">rtp_sender_audio_</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="1676.2568" y2="1714.9912"/><polygon fill="#66696B" points="1106,1704.9912,1110,1714.9912,1114,1704.9912,1110,1708.9912" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="32" x="1114" y="1700.874">发送</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="1650.2568" y2="1670.2568"/><polygon fill="#66696B" points="1106,1660.2568,1110,1670.2568,1114,1660.2568,1110,1664.2568" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="1772.0674" y2="1792.0674"/><polygon fill="#66696B" points="1106,1782.0674,1110,1792.0674,1114,1782.0674,1110,1786.0674" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5;" x1="295" x2="295" y1="1957.5361" y2="1992.5361"/><polygon fill="#66696B" points="291,1982.5361,295,1992.5361,299,1982.5361,295,1986.5361" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5;" x1="295" x2="295" y1="2033.6123" y2="2062.3779"/><polygon fill="#66696B" points="291,2052.3779,295,2062.3779,299,2052.3779,295,2056.3779" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5;" x1="295" x2="295" y1="2103.4541" y2="2157.1885"/><polygon fill="#66696B" points="291,2147.1885,295,2157.1885,299,2147.1885,295,2151.1885" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="81" x="299" y="2135.5713">observer_</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="295" x2="295" y1="2198.2646" y2="2247.1162"/><polygon fill="#66696B" points="291,2237.1162,295,2247.1162,299,2237.1162,295,2241.1162" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="162" x="299" y="2225.499">fine_audio_buffer_</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="868" x2="868" y1="1957.5361" y2="1992.5361"/><polygon fill="#66696B" points="864,1982.5361,868,1992.5361,872,1982.5361,868,1986.5361" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5;" x1="868" x2="868" y1="2033.6123" y2="2062.3779"/><polygon fill="#66696B" points="864,2052.3779,868,2062.3779,872,2052.3779,868,2056.3779" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5;" x1="868" x2="868" y1="2103.4541" y2="2157.1885"/><polygon fill="#66696B" points="864,2147.1885,868,2157.1885,872,2147.1885,868,2151.1885" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="27" x="872" y="2135.5713">JNI</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="868" x2="868" y1="2198.2646" y2="2247.1162"/><polygon fill="#66696B" points="864,2237.1162,868,2247.1162,872,2237.1162,868,2241.1162" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="171" x="872" y="2225.499">nativeAudioTrackJni</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1391" x2="1391" y1="1957.5361" y2="1992.5361"/><polygon fill="#66696B" points="1387,1982.5361,1391,1992.5361,1395,1982.5361,1391,1986.5361" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5;" x1="1391" x2="1391" y1="2033.6123" y2="2062.3779"/><polygon fill="#66696B" points="1387,2052.3779,1391,2062.3779,1395,2052.3779,1391,2056.3779" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5; stroke-dasharray: 7.0,7.0;" x1="1391" x2="1391" y1="2103.4541" y2="2157.1885"/><polygon fill="#66696B" points="1387,2147.1885,1391,2157.1885,1395,2147.1885,1391,2151.1885" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="135" x="1395" y="2135.5713">_paRenderBuffer</text><line style="stroke: #66696B; stroke-width: 1.5; stroke-dasharray: 7.0,7.0;" x1="1391" x2="1391" y1="2198.2646" y2="2247.1162"/><polygon fill="#66696B" points="1387,2237.1162,1391,2247.1162,1395,2237.1162,1391,2241.1162" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="189" x="1395" y="2225.499">render_worker_thread_</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1742" x2="1742" y1="2073.6123" y2="2108.6123"/><polygon fill="#66696B" points="1738,2098.6123,1742,2108.6123,1746,2098.6123,1742,2102.6123" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5;" x1="2030" x2="2030" y1="2073.6123" y2="2108.6123"/><polygon fill="#66696B" points="2026,2098.6123,2030,2108.6123,2034,2098.6123,2030,2102.6123" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #FF0000; stroke-width: 1.5;" x1="295" x2="295" y1="1898.8018" y2="1937.5361"/><polygon fill="#FF0000" points="291,1927.5361,295,1937.5361,299,1927.5361,295,1931.5361" style="stroke: #FF0000; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="27" x="299" y="1923.4189">iOS</text><line style="stroke: #FF0000; stroke-width: 1.5;" x1="868" x2="868" y1="1898.8018" y2="1937.5361"/><polygon fill="#FF0000" points="864,1927.5361,868,1937.5361,872,1927.5361,868,1931.5361" style="stroke: #FF0000; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="63" x="872" y="1923.4189">Android</text><line style="stroke: #FF0000; stroke-width: 1.5;" x1="1391" x2="1391" y1="1898.8018" y2="1937.5361"/><polygon fill="#FF0000" points="1387,1927.5361,1391,1937.5361,1395,1927.5361,1391,1931.5361" style="stroke: #FF0000; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="45" x="1395" y="1923.4189">macOS</text><line style="stroke: #FF0000; stroke-width: 1.5;" x1="1742" x2="1742" y1="1898.8018" y2="2053.6123"/><polygon fill="#FF0000" points="1738,2043.6123,1742,2053.6123,1746,2043.6123,1742,2047.6123" style="stroke: #FF0000; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="63" x="1746" y="1984.5742">Windows</text><line style="stroke: #FF0000; stroke-width: 1.5;" x1="2030" x2="2030" y1="1898.8018" y2="2053.6123"/><polygon fill="#FF0000" points="2026,2043.6123,2030,2053.6123,2034,2043.6123,2030,2047.6123" style="stroke: #FF0000; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="45" x="2034" y="1984.5742">Linux</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="295" x2="295" y1="2288.1924" y2="2326.9268"/><polygon fill="#66696B" points="291,2316.9268,295,2326.9268,299,2316.9268,295,2320.9268" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="180" x="299" y="2312.8096">audio_device_buffer_</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="868" x2="868" y1="2288.1924" y2="2326.9268"/><polygon fill="#66696B" points="864,2316.9268,868,2326.9268,872,2316.9268,868,2320.9268" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="180" x="872" y="2312.8096">audio_device_buffer_</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1391" x2="1391" y1="2288.1924" y2="2326.9268"/><polygon fill="#66696B" points="1387,2316.9268,1391,2326.9268,1395,2316.9268,1391,2320.9268" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="135" x="1395" y="2312.8096">_ptrAudioBuffer</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1742" x2="1742" y1="2170.7646" y2="2326.9268"/><polygon fill="#66696B" points="1738,2316.9268,1742,2326.9268,1746,2316.9268,1742,2320.9268" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="135" x="1746" y="2251.6543">_ptrAudioBuffer</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="2030" x2="2030" y1="2170.7646" y2="2326.9268"/><polygon fill="#66696B" points="2026,2316.9268,2030,2326.9268,2034,2316.9268,2030,2320.9268" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="135" x="2034" y="2251.6543">_ptrAudioBuffer</text><line style="stroke: #FF0000; stroke-width: 1.5;" x1="1110" x2="1110" y1="1844.0674" y2="1892.8018"/><polygon fill="#FF0000" points="1106,1882.8018,1110,1892.8018,1114,1882.8018,1110,1886.8018" style="stroke: #FF0000; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="32" x="1114" y="1871.3018">接收</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="2332.9268" y2="2352.9268"/><polygon fill="#66696B" points="1106,2342.9268,1110,2352.9268,1114,2342.9268,1110,2346.9268" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="2394.0029" y2="2442.7373"/><polygon fill="#66696B" points="1106,2432.7373,1110,2442.7373,1114,2432.7373,1110,2436.7373" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="171" x="1114" y="2421.2373">audio_transport_cb_</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="2483.8135" y2="2532.5479"/><polygon fill="#66696B" points="1106,2522.5479,1110,2532.5479,1114,2522.5479,1110,2526.5479" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="54" x="1114" y="2511.0479">mixer_</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="2573.624" y2="2593.624"/><polygon fill="#66696B" points="1106,2583.624,1110,2593.624,1114,2583.624,1110,2587.624" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="2634.7002" y2="2683.4346"/><polygon fill="#66696B" points="1106,2673.4346,1110,2683.4346,1114,2673.4346,1110,2677.4346" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="108" x="1114" y="2661.9346">audio_source</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="2724.5107" y2="2773.2451"/><polygon fill="#66696B" points="1106,2763.2451,1110,2773.2451,1114,2763.2451,1110,2767.2451" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="144" x="1114" y="2751.7451">channel_receive_</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="2814.3213" y2="2863.0557"/><polygon fill="#66696B" points="1106,2853.0557,1110,2863.0557,1114,2853.0557,1110,2857.0557" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="117" x="1114" y="2841.5557">acm_receiver_</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="2904.1318" y2="2952.8662"/><polygon fill="#66696B" points="1106,2942.8662,1110,2952.8662,1114,2942.8662,1110,2946.8662" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="54" x="1114" y="2931.3662">neteq_</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="2993.9424" y2="3042.6768"/><polygon fill="#66696B" points="1106,3032.6768,1110,3042.6768,1114,3032.6768,1110,3036.6768" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="45" x="1114" y="3021.1768">frame</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="3083.7529" y2="3132.4873"/><polygon fill="#66696B" points="1106,3122.4873,1110,3132.4873,1114,3122.4873,1110,3126.4873" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="72" x="1114" y="3110.9873">decoder_</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="3173.5635" y2="3222.2979"/><polygon fill="#66696B" points="1106,3212.2979,1110,3222.2979,1114,3212.2979,1110,3216.2979" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="36" x="1114" y="3200.7979">this</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="3350.4502" y2="3370.4502"/><polygon fill="#66696B" points="1106,3360.4502,1110,3370.4502,1114,3360.4502,1110,3364.4502" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5; stroke-dasharray: 1.0,3.0;" x1="1110" x2="1110" y1="3411.5264" y2="3460.2607"/><polygon fill="#66696B" points="1106,3450.2607,1110,3460.2607,1114,3450.2607,1110,3454.2607" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="45" x="1114" y="3438.7607">NetEQ</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="3289.374" y2="3309.374"/><polygon fill="#66696B" points="1106,3299.374,1110,3309.374,1114,3299.374,1110,3303.374" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="3501.3369" y2="3521.3369"/><polygon fill="#66696B" points="1106,3511.3369,1110,3521.3369,1114,3511.3369,1110,3515.3369" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="3263.374" y2="3283.374"/><polygon fill="#66696B" points="1106,3273.374,1110,3283.374,1114,3273.374,1110,3277.374" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="3553.3369" y2="3592.0713"/><polygon fill="#66696B" points="1106,3582.0713,1110,3592.0713,1114,3582.0713,1110,3586.0713" style="stroke: #66696B; stroke-width: 1.0;"/><text fill="#000000" font-family="Consolas" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="32" x="1114" y="3577.9541">接收</text><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="3527.3369" y2="3547.3369"/><polygon fill="#66696B" points="1106,3537.3369,1110,3547.3369,1114,3537.3369,1110,3541.3369" style="stroke: #66696B; stroke-width: 1.0;"/><line style="stroke: #66696B; stroke-width: 1.5;" x1="1110" x2="1110" y1="3649.1475" y2="3669.1475"/><polygon fill="#66696B" points="1106,3659.1475,1110,3669.1475,1114,3659.1475,1110,3663.1475" style="stroke: #66696B; stroke-width: 1.0;"/><!--MD5=[5a355b17e7753dbfa972e44db07d5ad0]
@startuml

' https://plantuml-documentation.readthedocs.io/en/latest/formatting/all-skin-params.html

' skinparam monochrome true
' skinparam backgroundColor transparent
' skinparam handwritten true
'/'
skinparam DefaultFontName Consolas
' skinparam DefaultTextAlignment center
skinparam DefaultFontSize 16
skinparam shadowing false

skinparam Activity {
    StartColor black
    EndColor red
    ArrowColor #66696b
    BorderColor #66696b

    BackgroundColor #FFFFFF
    BorderThickness 2
    FontName Consolas
    FontSize 18
    ' FontStyle bold
}

skinparam Note {
    BorderColor #66696b
    BackgroundColor #FFFFFF
    FontName Consolas
    FontSize 16
    FontColor #555555
    ' BorderThickness 4
}

skinparam Partition {
    BorderColor #bac0c1
    FontColor #555555
}

skinparam title {
   FontSize 24
   BorderRoundCorner 10
   BorderThickness 1
   ' BorderColor red
   ' BackgroundColor Aqua-CadetBlue
}
'/

title WebRTC音频数据调用流程

start
-[#red]->发送;
fork
' start iOS
-[#red]->iOS;
:VoiceProcessingAudioUnit::OnDeliverRecordedData]
:VoiceProcessingAudioUnit::NotifyDeliverRecordedData]
->oberver_;
:AudioDeviceIOS::OnDeliverRecordedData]
->fine_audio_buffer_;
:FineAudioBuffer::DeliverRecordedData]
->audio_device_buffer_;
' stop iOS
fork again
' start Android
-[#red]->Android;
:AudioRecordThread run]
:WebRtcAudioRecord nativeDataIsRecorded]
->JNI;
:Java_org_webrtc_audio_WebRtcAudioRecord_nativeDataIsRecorded]
->nativeAudioRecordJni;
:AudioRecordJni::DataIsRecorded]
->audio_device_buffer_;
' stop Android
fork again
' start macOS
-[#red]->macOS;
:AudioDeviceMac::deviceIOProc]
:AudioDeviceMac::implInDeviceIOProc]
-[dashed]->_paCaptureBuffer;
:AudioDeviceMac::implInConverterProc]
-[dashed]->capture_worker_thread_;
:AudioDeviceMac::DeliverRecordedData]
->_ptrAudioBuffer;
' stop macOS
fork again
' start Windows
-[#red]->Windows;
:AudioDeviceWindowsCore::
DoCaptureThreadPollDMO]
->_ptrAudioBuffer;
' stop Windows
fork again
' start Linux
-[#red]->Linux;
:AudioDeviceLinuxPulse::
RecThreadProcess]
->_ptrAudioBuffer;
' stop Linux
end fork


:AudioDeviceBuffer::DeliverRecordedData]
->audio_transport_cb_;
:AudioTransportImp::RecodrdedDataIsAvailable]
->sending_streams_;
:AudioSendStream::SendAudioData]
->channel_send_;
:ChannelSend::ProcessAndEncodeAudio]
-[dotted]->encoder_queue_;
(+)
->audio_coding_;
:AudioCodingModuleImpl::Add10MsData]
:AudioCodingModuleImpl::Encode]
->encoder_stack_;
:AudioEncder::Encode]
->this;
:AudioEncoderOpusImpl::EncodeImpl]
fork
#bac0c1:WebRtcOpus_Encode]
end fork
:AudioCodingModuleImpl::Encode]
->packetizarion_callback_;
:ChannelSend::SendData]
:ChannelSend::SendRtpAudio]
->rtp_sender_audio_;
:RTPSenderAudio::SendAudio]
fork
->发送;
#AAAAAA:RTP & Network layer]
detach
end fork

stop



start
-[#red]->接收;
fork
' start iOS
-[#red]->iOS;
(+)
:VoiceProcessingAudioUnit::OnGetPlayoutData]
:VoiceProcessingAudioUnit::NotifyGetPlayoutData]
->observer_;
:AudioDeviceIOS::OnGetPlayoutData]
->fine_audio_buffer_;
:FineAudioBuffer::GetPlayoutData]
->audio_device_buffer_;
' stop iOS
fork again
' start Android
-[#red]->Android;
(+)
:AudioTrackThread run]
:WebRtcAudioTrack nativeGetPlayoutData]
->JNI;
:Java_org_webrtc_audio_WebRtcAudioTrack_nativeGetPlayoutData]
->nativeAudioTrackJni;
:AudioTrackJni::GetPlayoutData]
->audio_device_buffer_;
' stop Android
fork again
' start macOS
-[#red]->macOS;
(+)
:AudioDeviceMac::deviceIOProc]
:AudioDeviceMac::implDeviceIOProc]
-[dashed]->_paRenderBuffer;
:AudioDeviceMac::implOutConverterProc]
-[dashed]->render_worker_thread_;
:AudioDeviceMac::RenderWorkerThread]
->_ptrAudioBuffer;
' stop macOS
fork again
' start Windows
-[#red]->Windows;
(+)
:AudioDeviceWindowsCore::
DoRenderThread]
->_ptrAudioBuffer;
' stop Windows
fork again
' start Linux
-[#red]->Linux;
(+)
:AudioDeviceLinuxPulse::
PlayThreadProcess]
->_ptrAudioBuffer;
' stop Linux
end fork

:AudioDeviceBuffer::RequestPlayoutData]
->audio_transport_cb_;
:AudioTransportImpl::NeedMorePlayData]
->mixer_;
:AudioMixerImpl::Mix]
:AudioMixerImpl::GetAudioFromSource]
->audio_source;
:AudioReceiveStream::GetAudioFrameWithInfo]
->channel_receive_;
:ChannelReceive::GetAudioFrameWithInfo]
->acm_receiver_;
:AcmReceiver::GetAudio]
->neteq_;
:NetEqImpl::DecodeLoop]
->frame;
:OpusFrame::Decode]
->decoder_;
:AudioDecoder::Decode]
->this;
:AudioDecoderOpusImpl::DecodeInternal]

fork
#bac0c1:WebRtcOpus_Decode]
:NetEqImpl::DecodeLoop]
-[dotted]->NetEQ;
:AcmReceiver::InsertPacket]
end fork
fork
->接收;
#AAAAAA:RTP & Network layer]
detach
end fork

stop

@enduml

@startuml


skinparam DefaultFontName Consolas
skinparam DefaultFontSize 16
skinparam shadowing false

skinparam Activity {
    StartColor black
    EndColor red
    ArrowColor #66696b
    BorderColor #66696b

    BackgroundColor #FFFFFF
    BorderThickness 2
    FontName Consolas
    FontSize 18
}

skinparam Note {
    BorderColor #66696b
    BackgroundColor #FFFFFF
    FontName Consolas
    FontSize 16
    FontColor #555555
}

skinparam Partition {
    BorderColor #bac0c1
    FontColor #555555
}

skinparam title {
   FontSize 24
   BorderRoundCorner 10
   BorderThickness 1
}

title WebRTC音频数据调用流程

start
-[#red]->发送;
fork
-[#red]->iOS;
:VoiceProcessingAudioUnit::OnDeliverRecordedData]
:VoiceProcessingAudioUnit::NotifyDeliverRecordedData]
->oberver_;
:AudioDeviceIOS::OnDeliverRecordedData]
->fine_audio_buffer_;
:FineAudioBuffer::DeliverRecordedData]
->audio_device_buffer_;
fork again
-[#red]->Android;
:AudioRecordThread run]
:WebRtcAudioRecord nativeDataIsRecorded]
->JNI;
:Java_org_webrtc_audio_WebRtcAudioRecord_nativeDataIsRecorded]
->nativeAudioRecordJni;
:AudioRecordJni::DataIsRecorded]
->audio_device_buffer_;
fork again
-[#red]->macOS;
:AudioDeviceMac::deviceIOProc]
:AudioDeviceMac::implInDeviceIOProc]
-[dashed]->_paCaptureBuffer;
:AudioDeviceMac::implInConverterProc]
-[dashed]->capture_worker_thread_;
:AudioDeviceMac::DeliverRecordedData]
->_ptrAudioBuffer;
fork again
-[#red]->Windows;
:AudioDeviceWindowsCore::
DoCaptureThreadPollDMO]
->_ptrAudioBuffer;
fork again
-[#red]->Linux;
:AudioDeviceLinuxPulse::
RecThreadProcess]
->_ptrAudioBuffer;
end fork


:AudioDeviceBuffer::DeliverRecordedData]
->audio_transport_cb_;
:AudioTransportImp::RecodrdedDataIsAvailable]
->sending_streams_;
:AudioSendStream::SendAudioData]
->channel_send_;
:ChannelSend::ProcessAndEncodeAudio]
-[dotted]->encoder_queue_;
(+)
->audio_coding_;
:AudioCodingModuleImpl::Add10MsData]
:AudioCodingModuleImpl::Encode]
->encoder_stack_;
:AudioEncder::Encode]
->this;
:AudioEncoderOpusImpl::EncodeImpl]
fork
#bac0c1:WebRtcOpus_Encode]
end fork
:AudioCodingModuleImpl::Encode]
->packetizarion_callback_;
:ChannelSend::SendData]
:ChannelSend::SendRtpAudio]
->rtp_sender_audio_;
:RTPSenderAudio::SendAudio]
fork
->发送;
#AAAAAA:RTP & Network layer]
detach
end fork

stop



start
-[#red]->接收;
fork
-[#red]->iOS;
(+)
:VoiceProcessingAudioUnit::OnGetPlayoutData]
:VoiceProcessingAudioUnit::NotifyGetPlayoutData]
->observer_;
:AudioDeviceIOS::OnGetPlayoutData]
->fine_audio_buffer_;
:FineAudioBuffer::GetPlayoutData]
->audio_device_buffer_;
fork again
-[#red]->Android;
(+)
:AudioTrackThread run]
:WebRtcAudioTrack nativeGetPlayoutData]
->JNI;
:Java_org_webrtc_audio_WebRtcAudioTrack_nativeGetPlayoutData]
->nativeAudioTrackJni;
:AudioTrackJni::GetPlayoutData]
->audio_device_buffer_;
fork again
-[#red]->macOS;
(+)
:AudioDeviceMac::deviceIOProc]
:AudioDeviceMac::implDeviceIOProc]
-[dashed]->_paRenderBuffer;
:AudioDeviceMac::implOutConverterProc]
-[dashed]->render_worker_thread_;
:AudioDeviceMac::RenderWorkerThread]
->_ptrAudioBuffer;
fork again
-[#red]->Windows;
(+)
:AudioDeviceWindowsCore::
DoRenderThread]
->_ptrAudioBuffer;
fork again
-[#red]->Linux;
(+)
:AudioDeviceLinuxPulse::
PlayThreadProcess]
->_ptrAudioBuffer;
end fork

:AudioDeviceBuffer::RequestPlayoutData]
->audio_transport_cb_;
:AudioTransportImpl::NeedMorePlayData]
->mixer_;
:AudioMixerImpl::Mix]
:AudioMixerImpl::GetAudioFromSource]
->audio_source;
:AudioReceiveStream::GetAudioFrameWithInfo]
->channel_receive_;
:ChannelReceive::GetAudioFrameWithInfo]
->acm_receiver_;
:AcmReceiver::GetAudio]
->neteq_;
:NetEqImpl::DecodeLoop]
->frame;
:OpusFrame::Decode]
->decoder_;
:AudioDecoder::Decode]
->this;
:AudioDecoderOpusImpl::DecodeInternal]

fork
#bac0c1:WebRtcOpus_Decode]
:NetEqImpl::DecodeLoop]
-[dotted]->NetEQ;
:AcmReceiver::InsertPacket]
end fork
fork
->接收;
#AAAAAA:RTP & Network layer]
detach
end fork

stop

@enduml

PlantUML version 1.2020.18(Thu Oct 01 03:40:44 CST 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: zh
Country: CN
--></g></svg>